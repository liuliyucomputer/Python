# VS Code 内置 Git 插件使用指南

## 一、Git 基本概念

在使用 VS Code 的 Git 插件之前，先了解几个核心概念：

1. **工作区（Working Directory）**：你当前正在编辑的文件目录
2. **暂存区（Staging Area）**：临时存放你的修改，准备提交的区域
3. **本地仓库（Local Repository）**：存储在你电脑上的 Git 仓库
4. **远程仓库（Remote Repository）**：存储在服务器上的 Git 仓库（如 GitHub、Gitee 等）

## 二、VS Code Git 插件界面介绍

打开 VS Code，在左侧边栏可以看到 Git 图标（类似于分支的图标），点击后会显示：

1. **更改（Changes）**：显示工作区中修改但未暂存的文件
2. **暂存的更改（Staged Changes）**：显示已暂存但未提交的文件
3. **提交历史（Commit History）**：显示所有提交记录

## 三、基本操作步骤

### 1. 初始化仓库

如果你在一个新的项目目录中：

- 打开 VS Code，点击左侧 Git 图标
- 点击「初始化仓库（Initialize Repository）」
- 选择项目目录即可

### 2. 克隆远程仓库

如果你想从远程仓库获取代码：

- 按下 `Ctrl + Shift + P`，输入「Git: Clone」
- 输入远程仓库 URL（如 `https://github.com/username/repo.git`）
- 选择本地存储目录

### 3. 修改文件

直接在 VS Code 中编辑文件即可。修改后的文件会在 Git 面板中显示：
- 红色：已修改但未暂存
- 绿色：已暂存

### 4. 暂存修改（Stage Changes）

暂存修改是将你的更改放入暂存区，准备提交：

- 在 Git 面板的「更改」列表中，点击文件右侧的「+」号
- 或右键点击文件，选择「暂存更改（Stage Changes）」
- 或使用快捷键 `Ctrl + Shift + P`，输入「Git: Stage All Changes」暂存所有修改

### 5. 提交修改（Commit Changes）

提交是将暂存区的修改保存到本地仓库：

- 在 Git 面板顶部的输入框中输入提交信息
- 点击输入框右侧的对勾图标
- 或使用快捷键 `Ctrl + Enter`

**注意**：提交信息应该清晰描述你做了什么修改

### 6. 拉取代码（Pull）

拉取是从远程仓库获取最新代码到本地：

- 点击 Git 面板右上角的「↓」图标
- 或使用快捷键 `Ctrl + Shift + P`，输入「Git: Pull」

### 7. 推送代码（Push）

推送是将本地仓库的提交发送到远程仓库：

- 点击 Git 面板右上角的「↑」图标
- 或使用快捷键 `Ctrl + Shift + P`，输入「Git: Push」

## 四、常用功能详解

### 1. 查看修改内容

- 在 Git 面板中，点击修改的文件名，可以查看具体修改内容
- 蓝色区域表示新增的内容，红色区域表示删除的内容

### 2. 撤销修改

- 未暂存的修改：在 Git 面板中右键点击文件，选择「放弃更改（Discard Changes）」
- 已暂存的修改：右键点击文件，选择「取消暂存（Unstage Changes）」

### 3. 分支管理

- 查看分支：Git 面板底部显示当前分支名称
- 创建分支：点击当前分支名称，输入新分支名
- 切换分支：点击分支名称，选择要切换的分支

### 4. 合并分支

- 切换到目标分支
- 右键点击要合并的分支，选择「合并到当前分支（Merge into Current Branch）」

## 五、常见问题及解决方案

### 1. 推送卡住的问题

**可能原因**：
- 网络连接问题
- 远程仓库权限问题
- Git 配置问题
- 冲突未解决

**解决方案**：

1. **检查网络连接**：确保你的网络可以访问远程仓库服务器

2. **检查远程仓库权限**：
   - 确认你有推送权限（在 GitHub/Gitee 上查看仓库设置）
   - 检查 SSH 密钥或 HTTPS 凭证是否正确配置

3. **配置 Git 用户信息**：
   打开终端，执行以下命令：
   ```bash
   git config --global user.name "你的用户名"
   git config --global user.email "你的邮箱"
   ```

4. **解决冲突**：
   - 如果有冲突，VS Code 会提示你解决
   - 打开冲突文件，编辑解决冲突
   - 重新暂存并提交

5. **强制推送（谨慎使用）**：
   ```bash
   git push -f origin 分支名
   ```
   注意：这会覆盖远程仓库的内容，仅在必要时使用

### 2. 推送成功但网页不显示的问题

**可能原因**：
- 推送的分支与网页显示的分支不一致
- 网络延迟
- 仓库设置问题

**解决方案**：

1. **检查推送的分支**：
   ```bash
   git branch -a  # 查看所有分支
   git status     # 查看当前分支
   ```

2. **等待网络同步**：有时候服务器需要一点时间同步，稍等几分钟后刷新网页

3. **检查远程仓库设置**：
   - 确认默认分支是否正确设置
   - 检查是否有分支保护规则

4. **重新克隆仓库测试**：
   ```bash
   git clone 远程仓库URL
   cd 仓库目录
   git log  # 查看提交记录
   ```

## 六、高级功能

### 1. 查看文件历史

- 右键点击文件，选择「查看文件历史（View File History）」

### 2. 比较版本

- 在提交历史中，右键点击两个提交，选择「比较提交（Compare Commits）」

### 3. 暂存部分修改

- 在文件修改视图中，点击修改行旁边的「+」号，可以单独暂存某一行的修改

## 七、快捷键汇总

| 功能 | 快捷键 |
|------|--------|
| 打开 Git 面板 | `Ctrl + Shift + G` |
| 暂存所有修改 | `Ctrl + Shift + P` → 输入「Git: Stage All Changes」 |
| 提交修改 | `Ctrl + Enter`（在提交信息框中） |
| 拉取代码 | `Ctrl + Shift + P` → 输入「Git: Pull」 |
| 推送代码 | `Ctrl + Shift + P` → 输入「Git: Push」 |
| 查看差异 | `Ctrl + Shift + P` → 输入「Git: Compare with Saved」 |

## 八、总结

VS Code 的内置 Git 插件提供了直观的界面来管理 Git 仓库，掌握基本操作后可以大大提高开发效率。遇到问题时，可以通过终端执行 Git 命令来排查，因为终端会显示更详细的错误信息。

记住一个基本原则：**先拉取（Pull），再修改，最后推送（Push）**，这样可以减少冲突的发生。