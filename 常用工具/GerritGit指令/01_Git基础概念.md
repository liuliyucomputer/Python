# Git基础概念

## 1. Git简介

### 1.1 Git的定义
Git是一个免费、开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目。它由Linux内核的创建者Linus Torvalds于2005年开发，最初用于管理Linux内核代码。

### 1.2 Git的历史
- 2002年：Linux内核开发团队开始使用BitKeeper作为版本控制系统
- 2005年：BitKeeper不再免费提供给Linux内核项目
- 2005年4月：Linus Torvalds开始开发Git
- 2005年6月：Git的第一个版本发布
- 2008年：GitHub网站成立，基于Git的代码托管平台

### 1.3 Git的核心特点
- **分布式**：每个开发者都拥有完整的代码仓库副本
- **高效**：Git处理大项目时速度非常快
- **可靠**：Git的数据存储采用SHA-1哈希算法，确保数据完整性
- **灵活**：支持多种工作流程和开发模式
- **强大的分支管理**：创建和合并分支非常高效

## 2. Git核心概念

### 2.1 仓库 (Repository)
仓库是Git存储代码和版本历史的地方。每个仓库包含所有文件的所有版本历史。

- **本地仓库**：存储在开发者本地计算机上的仓库
- **远程仓库**：存储在服务器上的仓库，供团队成员共享

```bash
# 创建本地仓库
git init

# 克隆远程仓库
git clone https://github.com/user/repo.git
```

### 2.2 工作区 (Working Directory)
工作区是你当前正在编辑的文件目录，是你实际看到和修改文件的地方。

### 2.3 暂存区 (Staging Area/Index)
暂存区是一个中间区域，用于临时存放你想要提交的文件修改。它允许你选择哪些修改要包含在下一次提交中。

### 2.4 Git仓库 (Git Repository)
Git仓库是Git存储所有版本信息的地方，包含所有提交的历史记录和元数据。

### 2.5 提交 (Commit)
提交是Git中保存文件修改的基本单位，包含以下信息：
- 文件的快照
- 提交者信息
- 提交时间
- 提交信息（描述本次修改的内容）
- 父提交的引用（用于构建版本历史树）

每个提交都有一个唯一的SHA-1哈希值作为标识符。

### 2.6 分支 (Branch)
分支是Git中用于并行开发的功能。每个分支都是一个独立的开发线，可以包含不同的提交历史。

- **默认分支**：通常称为master或main
- **特性分支**：用于开发特定功能的分支
- **发布分支**：用于准备发布版本的分支
- **修复分支**：用于修复生产环境问题的分支

### 2.7 合并 (Merge)
合并是将一个分支的修改合并到另一个分支的过程。Git提供了多种合并策略：
- **Fast-forward合并**：当目标分支是源分支的直接祖先时使用
- **Three-way合并**：当两个分支有共同祖先但都有各自的修改时使用

### 2.8 标签 (Tag)
标签用于标记特定的提交，通常用于版本发布。

- **轻量标签**：只是一个指向特定提交的引用
- **带注释标签**：包含标签信息、创建者、创建时间等元数据

### 2.9 HEAD
HEAD是一个特殊的引用，指向当前正在工作的分支或提交。

- **指向分支**：当你在分支上工作时，HEAD指向当前分支的最新提交
- **分离HEAD状态**：当你直接检出一个提交而不是分支时，HEAD指向该提交

## 3. Git工作原理

### 3.1 Git的数据存储
Git以文件系统对象的形式存储数据，主要包含三种类型的对象：

1. **Blob对象**：存储文件内容
2. **Tree对象**：存储目录结构和文件引用
3. **Commit对象**：存储提交信息和指向Tree对象的引用

### 3.2 Git的工作流程

Git的基本工作流程如下：

1. **修改文件**：在工作区修改文件
2. **暂存修改**：将修改添加到暂存区
3. **提交修改**：将暂存区的修改提交到本地仓库
4. **推送修改**：将本地仓库的修改推送到远程仓库

```bash
# 修改文件后查看状态
git status

# 将修改添加到暂存区
git add file.txt

# 提交修改到本地仓库
git commit -m "Add new feature"

# 将修改推送到远程仓库
git push origin main
```

### 3.3 Git的分支原理

Git的分支实际上是指向提交对象的指针。创建分支只需要创建一个新的指针，而不需要复制所有文件。

```bash
# 创建分支
git branch feature

# 切换分支
git checkout feature

# 创建并切换分支
git checkout -b feature
```

### 3.4 Git的合并原理

#### 3.4.1 Fast-forward合并
当目标分支是源分支的直接祖先时，Git会执行Fast-forward合并，只是将目标分支的指针移动到源分支的最新提交。

```bash
# Fast-forward合并
git checkout main
git merge feature
```

#### 3.4.2 Three-way合并
当两个分支有共同祖先但都有各自的修改时，Git会执行Three-way合并，创建一个新的合并提交。

```bash
# Three-way合并
git checkout main
git merge feature
```

## 4. Git与其他版本控制系统的比较

### 4.1 集中式 vs 分布式

| 特性 | 集中式版本控制系统（如SVN） | 分布式版本控制系统（如Git） |
|------|--------------------------|--------------------------|
| 仓库存储 | 所有版本历史存储在中央服务器 | 每个开发者都有完整的仓库副本 |
| 离线工作 | 不能离线工作，必须连接服务器 | 可以完全离线工作 |
| 分支管理 | 分支创建和合并效率低 | 分支创建和合并非常高效 |
| 安全性 | 中央服务器故障可能导致数据丢失 | 多个副本确保数据安全性 |
| 性能 | 大项目操作速度慢 | 大项目操作速度快 |

### 4.2 Git vs SVN

| 特性 | Git | SVN |
|------|-----|-----|
| 体系结构 | 分布式 | 集中式 |
| 分支模型 | 轻量级分支 | 重量级分支 |
| 提交方式 | 本地提交，然后推送到远程 | 直接提交到中央服务器 |
| 版本标识 | SHA-1哈希 | 递增的版本号 |
| 存储空间 | 更高效的存储算法 | 存储空间占用较大 |
| 冲突处理 | 更灵活的冲突解决方式 | 相对简单的冲突解决 |

## 5. Git工作流程模式

### 5.1 集中式工作流程

类似于SVN的工作流程，所有开发者都在一个中央分支上工作。

1. 克隆中央仓库
2. 在本地修改文件
3. 提交修改到本地仓库
4. 推送到中央仓库

### 5.2 功能分支工作流程

每个功能或任务都在独立的分支上开发，然后合并到主分支。

1. 创建功能分支
2. 在分支上开发功能
3. 推送分支到远程仓库
4. 创建拉取请求(Pull Request)或合并请求(Merge Request)
5. 代码审查后合并到主分支
6. 删除功能分支

### 5.3 GitFlow工作流程

GitFlow是一种更复杂的工作流程，适用于有严格版本发布计划的项目。

- **主分支(master/main)**：包含稳定的发布版本
- **开发分支(develop)**：包含最新的开发版本
- **功能分支(feature)**：从develop分支创建，用于开发新功能
- **发布分支(release)**：从develop分支创建，用于准备发布版本
- **修复分支(hotfix)**：从master分支创建，用于修复生产环境问题

### 5.4 Forking工作流程

适用于开源项目，开发者先fork项目，然后在自己的fork上工作，最后提交拉取请求。

1. Fork项目到自己的账号
2. 克隆自己的fork到本地
3. 创建功能分支
4. 开发功能并提交
5. 推送到自己的fork
6. 创建拉取请求到原项目

## 6. Git配置

### 6.1 全局配置

全局配置适用于当前用户的所有Git仓库。

```bash
# 设置用户名
git config --global user.name "Your Name"

# 设置用户邮箱
git config --global user.email "your.email@example.com"

# 设置默认编辑器
git config --global core.editor "vim"

# 设置差异工具
git config --global diff.tool "meld"

# 设置推送策略
git config --global push.default "simple"

# 查看全局配置
git config --global --list
```

### 6.2 本地配置

本地配置只适用于当前Git仓库。

```bash
# 进入仓库目录
cd /path/to/repo

# 设置用户名
git config user.name "Your Name"

# 设置用户邮箱
git config user.email "your.email@example.com"

# 查看本地配置
git config --local --list
```

## 7. 总结

Git是一个强大的分布式版本控制系统，具有以下核心概念：

- **仓库**：存储代码和版本历史
- **工作区**：当前正在编辑的文件目录
- **暂存区**：临时存放要提交的修改
- **提交**：保存文件修改的基本单位
- **分支**：用于并行开发的功能
- **合并**：将一个分支的修改合并到另一个分支

了解这些基础概念是学习Git的第一步，它们构成了Git的核心框架。在接下来的章节中，我们将深入学习Git的常用指令和高级用法，帮助您熟练掌握Git的使用。

下一章：[Git常用指令](02_Git常用指令.md)